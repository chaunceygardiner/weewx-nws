nws change history
------------------

1.9 02/11/2022
1. Fix errors if RsyncSpec section not specified in weewx.conf

1.8 02/01/2022
1. Hang on to Last-Modified header in response so it can be passed
   as If-Modified-Since header in request.  In this way, the server
   will return 304 (Not Mofified) if there isn't a new forecast.

1.7 01/28/2022
1. Revamped support for sharing forecasts between instances.

   a. Master weewx instances (i.e., instances of weewx that will
      query NWS for forecasts and distribute them), should add
      the following to the NWS section in weewx.conf:

   [NWS]
       .
       .
       .
       [[RsyncSpec]]
           enable = true
           remote_clients = <weewx-machine-1>, <weewx-machine-2>
           remote_user = root
           remote_dir = /root/forecasts
           compress = false
           log_success = false
           ssh_options = -o ConnectTimeout=1
           timeout = 1

   b. client weewx instances that will read forecast files distributed
      by the master (auto-magically via ssh), need to add the following
      to the NWS section of weewx.conf:

   [NWS]
       .
       .
       .
       read_from_dir = /root/forecasts

    c. passwordless ssh also needs to be setup between the master and the
       clients from the user on the master to the user specified by
       remote_user.  If you don't understand this, this feature is not for
       you.

1.6 01/23/2022
1. Support sharing forecasts between instances.  To accomplish this,
   a. for the "master" machine (i.e., the instance that will make
      forecasts available to share), add the following to the NWS
      section:
        forecasts_dir = <directory-to-write-TWELVE_HOUR-and-ONE_HOUR-forecasts>
   b. distribute the TWELVE_HOUR and ONE_HOUR files on your own (with rsync or scp commands in crontab)
   c. on the machines where the TWELVE_HOUR and ONE_HOUR files are distributed, add
      the following to the NWS section:
        read_twelve_hour_forecast_from_file = /<path>/TWELVE_HOUR
        read_one_hour_forecast_from_file = /<path>/ONE_HOUR
   With the above setup, only one instance (the master) will actually call nws.
   Note: It is not anticipated that this feature will be popular, as such, it is not described in the README.

1.5 12/14/2021
--------------
1. Guard against downloading forecasts with a generated time in the future.
   (Unfortunately, NWS is sometimes returning bogus generated times.)

1.4 11/23/2021
--------------
1. Allow twelve and one hour forecast URLs to be hardcoded
   (necessary since the NWS is returning the wrong grid for the author's lat/long)
   (Note: NWS has ackknowledged this bug and is working on a fix.)

1.3 03/15/2021
--------------
1. Fetch fresh URLs from NWS on every poll (just in case they ever change).

1.2 08/16/2020
--------------
1. Handle multiple simutaneous alerts.
   Regression caused by https://github.com/chaunceygardiner/weewx-nws/commit/1b11f462232066d8daae7cb7b890fd307601c069

1.1 07/22/2020
--------------
1. Handle case where 404/503 responses are not proper json.

1.0 05/30/2020
--------------
Initial release of NWS.

0.1 05/22/2020
--------------
Initial check-in.

